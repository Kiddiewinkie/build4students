<!DOCTYPE html>
<html lang="en">
<head>
  <title>Settings</title>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- W3CSS (you use it for buttons/borders) -->
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css" />

  <!-- Fonts -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&display=swap" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" />

  <style>
    :root{
      --sand: #f6f4ef;
      --ink: #36454F;
      --muted: #818589;
      --brown: #6F4E37;
      --accent: #6E260E;
      --border: rgba(54,69,79,0.15);
      --card: rgba(255,255,255,0.60);
      --card-strong: rgba(255,255,255,0.75);
    }

    * { box-sizing: border-box; }

    html, body{
      height:100%;
      margin:0;
      font-family: "Press Start 2P", monospace;
      font-size:10px;
      color: var(--muted);
      background: var(--sand);
    }

    /* ===== TOP NAV (same look as your other pages) ===== */
    .nav-shell{
      display:flex;
      justify-content: space-between;
      align-items:center;
      padding: 8px 16px;
    }
    .nav-left{
      display:flex;
      gap: 100px;
      align-items:center;
      color: var(--ink);
    }
    .nav-right{
      display:flex;
      gap: 12px;
      align-items:center;
      color: var(--ink);
    }

    /* ===== PAGE LAYOUT ===== */
    .page{
      padding-top: 56px; /* space under fixed nav */
      height: 100vh;
      background: var(--sand);
    }

    .settings-shell{
      height: calc(100vh - 56px);
      display:grid;
      grid-template-columns: 280px 1fr;
      gap: 18px;
      padding: 18px;
    }

    /* ===== LEFT SIDEBAR ===== */
    .settings-sidebar{
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 14px 10px;
      overflow:auto;
    }

    .settings-title{
      font-family:"Press Start 2P", monospace;
      margin: 6px 10px 18px;
      font-size: 14px;
      letter-spacing: 1px;
      color: var(--ink);
      font-weight: normal;
    }

    .side-link{
      display:flex;
      align-items:center;
      gap: 10px;
      padding: 12px 12px;
      margin: 6px;
      border-radius: 10px;
      cursor:pointer;
      color: var(--ink);
      text-decoration:none;
    }

    .side-link span:last-child{
      font-size: 10px;
      color: var(--ink);
    }

    .side-link:hover{
      background: rgba(54,69,79,0.08);
    }

    .side-link.active{
      background: rgba(110, 38, 14, 0.10);
      border: 1px solid rgba(110, 38, 14, 0.18);
    }

    .side-ico{
      width: 18px;
      height: 18px;
      border-radius: 6px;
      background: rgba(54,69,79,0.12);
      flex: 0 0 18px;
    }

    /* ===== RIGHT CONTENT (scrolls) ===== */
    .settings-main{
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      overflow-y: auto;
      padding: 18px;
    }

    .card{
      background: var(--card-strong);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 14px;
    }

    .card h3{
      margin: 0 0 12px;
      font-size: 14px;
      letter-spacing: 1px;
      color: var(--brown);
      font-weight: normal;
    }

    .row{
      display:flex;
      justify-content: space-between;
      align-items:center;
      gap: 12px;
      padding: 12px 0;
      border-top: 1px solid rgba(54,69,79,0.10);
    }
    .row:first-of-type{
      border-top:none;
      padding-top:0;
    }

    .label{
      color: var(--ink);
      font-size: 10px;
    }

    .desc{
      color: var(--muted);
      font-size: 9px;
      margin-top: 6px;
      max-width: 520px;
      line-height: 1.6;
    }

    .pill-btn{
      border: 1px solid rgba(54,69,79,0.25);
      background: rgba(255,255,255,0.80);
      border-radius: 999px;
      padding: 8px 12px;
      cursor:pointer;
      font-family:"Press Start 2P", monospace;
      font-size: 9px;
      color: var(--ink);
      white-space: nowrap;
    }
    .pill-btn:hover{
      background: rgba(110, 38, 14, 0.10);
      border-color: rgba(110, 38, 14, 0.25);
    }


    /* ===== Toggle switch ===== */
    .toggle-row{
      display:flex;
      justify-content: space-between;
      align-items:center;
      gap: 12px;
      padding: 12px 0;
      border-top: 1px solid rgba(54,69,79,0.10);
    }

    .switch{
      position: relative;
      width: 54px;
      height: 28px;
      display:inline-block;
    }
    .switch input{ display:none; }
    .slider{
      position:absolute;
      inset:0;
      background: rgba(54,69,79,0.18);
      border: 1px solid rgba(54,69,79,0.25);
      border-radius: 999px;
      transition: 0.2s;
    }
    .slider:before{
      content:"";
      position:absolute;
      width: 22px;
      height: 22px;
      left: 3px;
      top: 50%;
      transform: translateY(-50%);
      background: #ffffff;
      border: 1px solid rgba(54,69,79,0.25);
      border-radius: 999px;
      transition: 0.2s;
    }
    .switch input:checked + .slider{
      background: rgba(110, 38, 14, 0.20);
      border-color: rgba(110, 38, 14, 0.30);
    }
    .switch input:checked + .slider:before{
      left: 28px;
    }

    .modal-content,
    .modal-content input,
    .modal-content button {
      letter-spacing: 0.3px;
    }

    .close {
      font-size: 16px;
      color: #36454F;
    }

    .modal-title {
      font-family: "Press Start 2P", monospace;
      font-size: 14px;      /* smaller & cleaner */
      font-weight: normal;
      color: #36454F;
      margin-bottom: 24px;
    }

    /* Modal background */
    .modal {
      display: none;
      position: fixed;
      z-index: 2000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
    }

    /* Modal box */
    .modal-content {
      background: #f6f4ef;
      width: 90%;
      max-width: 400px;
      margin: 10% auto;
      padding: 32px;
      border-radius: 8px;
      position: relative;
      text-align: center;
    }

    /* --- LOGIN / SIGN UP MODAL TYPOGRAPHY --- */
    .modal-content {
      font-family: "Press Start 2P", monospace;
      font-size: 10px;          /* smaller + readable */
      line-height: 1.6;
      color: #36454F;
    }

    /* Modal title */
    .modal-content h2 {
      font-family: "Press Start 2P", monospace;
      font-size: 14px;
      font-weight: normal;
      margin-bottom: 20px;
    }

    /* Inputs */
    .modal-content input {
      font-family: "Press Start 2P", monospace;
      font-size: 9px;
      padding: 12px;
      margin-top: 12px;
    }

    /* Login / Signup button */
    .modal-content button {
      font-family: "Press Start 2P", monospace;
      font-size: 10px;
      padding: 14px 0;
    }

    /* Switch text */
    .modal-switch {
      font-size: 9px;
      line-height: 1.6;
    }

    .modal-switch span {
      font-size: 9px;
      font-weight: normal;
    }


    /* Close button */
    .close {
      position: absolute;
      top: 12px;
      right: 16px;
      font-size: 24px;
      cursor: pointer;
    }

    /* Switch text */
    .modal-switch {
      margin-top: 16px;
      font-size: 14px;
    }

    .modal-switch span {
      color: #6F4E37;
      cursor: pointer;
      font-weight: 300;
      font-size: 14px;
    }

    /* Responsive */
    @media (max-width: 860px){
      .settings-shell{ grid-template-columns: 1fr; height:auto; }
      .settings-main{ height:auto; overflow:visible; }
      .page{ height:auto; min-height:100vh; }
      .theme-grid{ grid-template-columns: 1fr; }
    }

    .tab-panel h3 {
      font-family: "Press Start 2P", monospace;
    }

    .prompt-chip{
      display:flex;
      justify-content: space-between;
      align-items:center;
      gap: 12px;
      padding: 10px 12px;
      margin-top: 10px;
      border-radius: 12px;
      background: rgba(255,255,255,0.70);
      border: 1px solid rgba(54,69,79,0.15);
    }

    .prompt-text{
      font-size: 9px;
      color: var(--ink);
      line-height: 1.6;
      word-break: break-word;
    }

    .prompt-del{
      border: none;
      cursor: pointer;
      background: rgba(111,78,55,0.12);
      color: var(--brown);
      border-radius: 10px;
      padding: 8px 10px;
      font-family: "Press Start 2P", monospace;
      font-size: 8px;
    }
    .prompt-del:hover{ filter: brightness(0.95); }


  </style>
</head>

<body>

  <!-- TOP NAV -->
  <div class="w3-top">
    <div class="w3-sand nav-shell">
      <div class="nav-left">
        <a href="index.html" class="w3-bar-item w3-button">HOME</a>
        <a href="index.html#about" class="w3-bar-item w3-button">ABOUT</a>
        <a href="diary.html" class="w3-bar-item w3-button">DIARY</a>
        <a href="settings.html" class="w3-bar-item w3-button">SETTINGS</a>
      </div>

      <div class="nav-right">
        <a href="javascript:void(0)" class="w3-bar-item w3-button w3-border w3-round" onclick="openModal('loginModal')">LOG IN</a>
        <a href="javascript:void(0)" class="w3-bar-item w3-button w3-border w3-round" onclick="openModal('signupModal')">SIGN UP</a>
      </div>
    </div>
  </div>

  <!-- PAGE BODY -->
  <div class="page">
    <div class="settings-shell">

      <!-- LEFT SIDEBAR -->
      <div class="settings-sidebar">
        <h2 class="settings-title" >Settings</h2>

        <a class="side-link active" href="javascript:void(0)" onclick="openSettingsTab('account', this)">
          <span class="side-ico"></span>
          <span>My Account</span>
        </a>

        <a class="side-link" href="javascript:void(0)" onclick="openSettingsTab('personal', this)">
          <span class="side-ico"></span>
          <span>Personalisation</span>
        </a>
      </div>

        <!-- TAB: ACCOUNT -->
        <div id="tab-account" class="tab-panel">
          <div class="card">
            <h3>My Account</h3>

            <div class="row">
              <div>
                <div class="label">Profile</div>
                <div class="desc">View and edit your basic account info.</div>
              </div>
              <button class="pill-btn" type="button">Manage</button>
            </div>

            <div class="row">
              <div>
                <div class="label">Email</div>
                <div class="desc">Update your email.</div>
              </div>
              <button class="pill-btn" type="button">Edit</button>
            </div>

            <div class="row">
              <div>
                <div class="label">Password</div>
                <div class="desc">Change your password.</div>
              </div>
              <button class="pill-btn" type="button">Change</button>
            </div>
          </div>
        </div>

        <!-- TAB: PERSONALISATION -->
        <div id="tab-personal" class="tab-panel" style="display:none;">
          <div class="card">
            <h3>Personalisation</h3>

            <!-- NOTIFICATIONS -->
            <div class="toggle-row">
              <div>
                <div class="label">Notifications</div>
                <div class="desc">Turn reminders on/off.</div>
              </div>

              <label class="switch">
                <input id="notifToggle" type="checkbox" />
                <span class="slider"></span>
              </label>
            </div>

          </div>

          <div class="card">
            <h3>Custom prompts</h3>

            <div class="row" style="display:block;">
              <div class="desc">
                Add multiple prompts. Your home page will randomly pick one each time it loads.
              </div>

              <div style="display:flex; gap:10px; margin-top:12px; flex-wrap:wrap;">
                <input id="promptInput" type="text"
                      placeholder="e.g. What’s one win today?"
                      style="flex:1; min-width:240px; padding:12px; border:1px solid rgba(54,69,79,0.2); background:rgba(255,255,255,0.6); font-family:'Press Start 2P', monospace; font-size:9px;">
                <button id="addPromptBtn" class="pill-btn" type="button">Add</button>
              </div>

              <div id="promptList" style="margin-top:14px;"></div>

              <div style="margin-top:14px; display:flex; gap:10px; flex-wrap:wrap;">
                <button id="resetPromptsBtn" class="pill-btn" type="button">Reset to default</button>
                <button id="clearPromptsBtn" class="pill-btn" type="button">Clear all</button>
              </div>
            </div>
          </div>

        </div>

      </div>
    </div>
  </div>

  <!-- LOGIN MODAL -->
  <div id="loginModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('loginModal')">&times;</span>

      <h2 class="modal-title">Log In</h2>


      <input class="w3-input w3-border" type="email" placeholder="Email">
      <input class="w3-input w3-border" type="password" placeholder="Password" style="margin-top:12px;">

      <button class="w3-button w3-dark-grey w3-margin-top w3-block">
        Log In
      </button>

      <p class="modal-switch">
        Don’t have an account?
        <span onclick="switchToSignup()">Sign up here</span>
      </p>
    </div>
  </div>

  <!-- SIGN UP MODAL -->
  <div id="signupModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal('signupModal')">&times;</span>

      <h2 class="modal-title">Sign Up</h2>

      <input class="w3-input w3-border" type="text" placeholder="Name">
      <input class="w3-input w3-border" type="email" placeholder="Email" style="margin-top:12px;">
      <input class="w3-input w3-border" type="password" placeholder="Password" style="margin-top:12px;">

      <button class="w3-button w3-dark-grey w3-margin-top w3-block">
        Create Account
      </button>

      <p class="modal-switch">
        Already have an account?
        <span onclick="switchToLogin()">Log in here</span>
      </p>
    </div>
  </div>

  <script>
    // ===== MODALS =====
    function openModal(id){ document.getElementById(id).style.display = "block"; }
    function closeModal(id){ document.getElementById(id).style.display = "none"; }
    function switchToSignup(){ closeModal("loginModal"); openModal("signupModal"); }
    function switchToLogin(){ closeModal("signupModal"); openModal("loginModal"); }

    window.addEventListener("click", (e) => {
      if (e.target.classList.contains("modal")) e.target.style.display = "none";
    });

    // ===== TABS =====
    function openSettingsTab(which, el){
        // Hide all tabs
        document.querySelectorAll(".tab-panel").forEach(div => div.style.display = "none");
        
        // Deactivate all links
        document.querySelectorAll(".side-link").forEach(a => a.classList.remove("active"));
        
        // Activate clicked link
        if (el) el.classList.add("active");

        // Show specific tab
        if (which === "account") document.getElementById("tab-account").style.display = "block";
        if (which === "personal") document.getElementById("tab-personal").style.display = "block";
    }

    // ===== NOTIFICATIONS =====
    const NOTIF_KEY = "notifEnabled";
    const toggle = document.getElementById("notifToggle");
    
    if (toggle) {
        toggle.checked = (localStorage.getItem(NOTIF_KEY) === "true");
        toggle.addEventListener("change", () => {
            localStorage.setItem(NOTIF_KEY, String(toggle.checked));
        });
    }

    // ===== CUSTOM PROMPTS =====
    const PROMPTS_KEY = "customPrompts";
    const DEFAULT_PROMPTS = [
      "How was your day?",
      "What’s on your mind right now?",
      "What are you grateful for today?",
      "What did you learn today?"
    ];

    // Helper: Get list (or default)
    function getPrompts(){
      const raw = localStorage.getItem(PROMPTS_KEY);
      if (!raw) return [...DEFAULT_PROMPTS];
      try {
        const arr = JSON.parse(raw);
        return (Array.isArray(arr) && arr.length > 0) ? arr : [...DEFAULT_PROMPTS];
      } catch (e) {
        return [...DEFAULT_PROMPTS];
      }
    }

    // Helper: Save list
    function savePrompts(list){
      localStorage.setItem(PROMPTS_KEY, JSON.stringify(list));
      renderPromptList(); // re-render immediately
    }

    // Helper: Escape HTML
    function escapeHtml(str){
      return String(str).replace(/[&<>"']/g, function(m){
        return {'&':'&amp;','<':'&lt;','>':'&gt;','\"':'&quot;','\'':'&#039;'}[m];
      });
    }

    // Render the list
    function renderPromptList(){
      const wrap = document.getElementById("promptList");
      if (!wrap) return;

      const prompts = getPrompts();
      wrap.innerHTML = "";

      prompts.forEach((p, index) => {
        const row = document.createElement("div");
        row.className = "prompt-chip";
        row.innerHTML = `
          <div class="prompt-text">${escapeHtml(p)}</div>
          <button class="prompt-del" onclick="deletePrompt(${index})">Remove</button>
        `;
        wrap.appendChild(row);
      });
    }

    // Delete action (global function so onclick works)
    window.deletePrompt = function(index) {
        const list = getPrompts();
        list.splice(index, 1);
        savePrompts(list);
    };

    // Add action
    const addBtn = document.getElementById("addPromptBtn");
    const input = document.getElementById("promptInput");

    if (addBtn && input) {
        addBtn.addEventListener("click", () => {
            const val = input.value.trim();
            if (!val) return;

            const list = getPrompts();
            list.unshift(val); // add to top
            savePrompts(list);
            input.value = ""; // clear input
        });
    }

    // Reset/Clear buttons
    document.getElementById("resetPromptsBtn")?.addEventListener("click", () => {
        savePrompts([...DEFAULT_PROMPTS]);
    });

    document.getElementById("clearPromptsBtn")?.addEventListener("click", () => {
        savePrompts(["How was your day?"]); // Keep at least one safe prompt
    });

    // Initial Render
    renderPromptList();

</script>

</body>
</html>
